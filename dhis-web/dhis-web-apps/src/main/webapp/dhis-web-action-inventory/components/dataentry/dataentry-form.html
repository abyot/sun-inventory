<div class="vertical-spacing" ng-if="model.selectedDataSet && model.selectedPeriod && model.categoryOptionsReady">

    <div ng-if="model.allowMultiOrgUnitEntry && model.selectedDataSet.entryMode === 'Multiple Entry'">

        <div class="remove-left-padding">
            <div class="col-sm-12 ">
                <tabset justified="true">
                    <tab heading="{{dataElementGroupSet.name}}" class="bold" ng-repeat="dataElementGroupSet in model.dataElementGroupSets">
                        <div class="row vertical-spacing">
                            <div class="col-sm-12">
                                <div class="list-group col-sm-3">
                                    <a ng-repeat="dataElementGroup in dataElementGroupSet.dataElementGroups" class="list-group-item cursor-pointer" ng-class="{true: 'active'} [dataElementGroup.id === currentDataElementGroup.id]" ng-click="setCurrentDataElementGroup(dataElementGroup)">
                                        {{dataElementGroup.name}}
                                    </a>
                                </div>
                                <div class="col-sm-9">
                                    <div ng-if="currentDataElementGroup && currentDataElementGroup.id">
                                        <accordion close-others='false'>
                                            <accordion-group ng-repeat="de in model.selectedDataSet.dataElements| filter: {dataElementGroup: currentDataElementGroup.name, dataElementGroupSet: dataElementGroupSet.name}">
                                                <accordion-heading>
                                                    {{de.displayName}}
                                                </accordion-heading>


                                                <table class="table table-bordered table-condensed vertical-spacing">
                                                    <tr ng-repeat="oco in model.selectedCategoryCombos[de.categoryCombo.id].categoryOptionCombos">
                                                        <td>
                                                            {{oco.displayName !== 'default' ? oco.displayName : 'value'| translate }}
                                                        </td>
                                                        <td>
                                                            <input type="text" 
                                                                   class="form-control pull-center" 
                                                                   ng-class="getInputNotifcationClass(ou, dataElement.id, oco.id)"
                                                                   ng-dblclick="getAuditInfo(dataElement, ou, oco, model.dataValues[ou][dataElement.id][oco.id].value, model.dataValues[ou][dataElement.id][oco.id].comment)"
                                                                   d2-blur="saveDataValue(ou, dataElement.id, oco.id)">
                                                        </td>
                                                    </tr>                                            
                                                </table>


                                            </accordion-group> 
                                        </accordion>
                                    </div>
                                    <div ng-if="!currentDataElementGroup || !currentDataElementGroup.id">
                                        <div class="alert alert-warning">
                                            {{'select_thematic_area'| translate}}
                                        </div>
                                    </div>
                                </div>
                            </div>                        
                        </div>
                    </tab>                    
                </tabset>
            </div>
        </div>

        <hr>

        <div class="remove-left-padding">
            <div class="col-sm-12 ">
                <tabset justified="true">
                    <tab heading="{{dataElementGroup.name}}" class="bold" ng-repeat="dataElementGroup in model.dataElementGroupSets[0].dataElementGroups">
                        <div class="row vertical-spacing">
                            <div class="col-sm-12">
                                <div class="list-group col-sm-3">
                                    <a ng-repeat="dataElement in model.selectedDataSet.dataElements| filter: {dataElementGroup: dataElementGroup.name, dataElementGroupSet: model.dataElementGroupSets[0].name}" class="list-group-item cursor-pointer" ng-class="{true: 'active'} [dataElement.id === currentDataElement.id]" ng-click="setCurrentDataElement(dataElement)">
                                        {{dataElement.displayName}}
                                    </a>
                                </div>
                                <div class="col-sm-9">
                                    <div ng-if="currentDataElement && currentDataElement.id">

                                        <table class="table table-bordered table-condensed vertical-spacing">
                                            <tr ng-repeat="oco in model.selectedCategoryCombos[currentDataElement.categoryCombo.id].categoryOptionCombos">
                                                <td>
                                                    {{oco.displayName !== 'default' ? oco.displayName : 'value'| translate }}
                                                </td>
                                                <td>
                                                    <input type="text" 
                                                           class="form-control pull-center" 
                                                           ng-class="getInputNotifcationClass(ou, dataElement.id, oco.id)"
                                                           ng-dblclick="getAuditInfo(dataElement, ou, oco, model.dataValues[ou][dataElement.id][oco.id].value, model.dataValues[ou][dataElement.id][oco.id].comment)"
                                                           d2-blur="saveDataValue(ou, dataElement.id, oco.id)">
                                                </td>
                                            </tr>                                            
                                        </table>

                                    </div>
                                    <div ng-if="!currentDataElement || !currentDataElement.id">
                                        <div class="alert alert-warning">
                                            {{'select_action_left'| translate}}
                                        </div>
                                    </div>
                                </div>
                            </div>                        
                        </div>
                    </tab>                    
                </tabset>
            </div>
        </div>



        <div class="clear vertical-spacing">
            <div class="col-sm-6 selectionArea vertical-spacing">
                <button type="button" 
                        class="btn btn-primary" 
                        ng-disabled="model.dataSetCompleted" 
                        ng-click="saveCompletness(selectedOrgUnit.id, model.allowMultiOrgUnitEntry)">
                    {{'save_completeness'| translate}}
                </button>
                <button type="button" 
                        class="btn btn-danger small-horizontal-spacing" 
                        ng-disabled="!model.dataSetCompleted" 
                        ng-click="deleteCompletness(selectedOrgUnit.id, model.allowMultiOrgUnitEntry)">
                    {{'delete_completeness'| translate}}
                </button>
            </div>
        </div>

    </div>

</div>