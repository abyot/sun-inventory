<div class="vertical-spacing" ng-if="model.selectedDataSet && model.selectedPeriod && model.categoryOptionsReady">

    <form name="outerForm" novalidate>
        <div ng-if="!model.showReportDiv">
            <div class="remove-left-padding">
                <div class="col-sm-12" equal-height-nav-tabs>

                    <tabset justified="true">
                        <tab heading="{{dataElementGroupSet.name}}" class="bold" ng-repeat="dataElementGroupSet in model.dataElementGroupSets" ng-click="setCurrentDataElementGroupSet( dataElementGroupSet )" active="dataElementGroupSet.active">
                            <div class="row vertical-spacing">
                                <div class="col-sm-12">
                                    <div class="list-group col-sm-3">
                                        <a ng-repeat="dataElementGroup in dataElementGroupSet.dataElementGroups" class="list-group-item cursor-pointer" ng-class="{true: 'active'} [dataElementGroup.id === currentDataElementGroup.id]" ng-click="setCurrentDataElementGroup(dataElementGroup)">
                                            {{dataElementGroup.name}}
                                        </a>
                                    </div>
                                    <div class="col-sm-9">
                                        <div class="alert redInfoArea bold">
                                            <span class="important-label">{{'important' | translate}}! </span>
                                            {{'show_definition_info' | translate}}
                                        </div>
                                        <div ng-if="currentDataElementGroup && currentDataElementGroup.id && !isHidden(de, currentDataElementGroup)" ng-repeat="de in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}}">                                            
                                            <table class="table table-bordered table-condensed" 
                                                   ng-if="de.dimensionAsMultiOptionSet || de.dimensionAsOptionSet || model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length === 1">                                                
                                                <tr ng-if="!de.dimensionAsOptionSet && !de.dimensionAsMultiOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1">
                                                    <th>                                                
                                                    </th>
                                                    <th ng-repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos">
                                                        {{oco.displayName}}
                                                    </th>
                                                </tr>                                            
                                                <tr>                                          
                                                    <td ng-class="getMainQuestionTableStyle(de)" class="mouse-pointer" 
                                                        ng-if="de.description" 
                                                        ng-click="de.showDescription = !de.showDescription">
                                                        {{de.displayName}}
                                                        <i class="fa fa-info-circle" aria-hidden="true"></i>
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                    <td ng-class="getMainQuestionTableStyle(de)"
                                                        ng-if="!de.description">
                                                        {{de.displayName}}
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div ng-if="!de.dimensionAsOptionSet && !de.dimensionAsMultiOptionSet" ng-init="oco = model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos[0]">                                                        
                                                            <span ng-if="de.valueType === 'TEXT'">
                                                                <input type="text"   
                                                                       ng-model="dataValues[de.id][oco.id].value"
                                                                       class="form-control" 
                                                                       ng-class="getInputNotifcationClass(de.id, oco.id)"                                                                       
                                                                       d2-blur="saveDataValue(de.id, oco.id, false)">
                                                            </span>
                                                            <span ng-if="de.valueType === 'LONG_TEXT'">
                                                                <textarea rows="5"  
                                                                       ng-model="dataValues[de.id][oco.id].value"
                                                                       class="form-control" 
                                                                       ng-class="getInputNotifcationClass(de.id, oco.id)"                                                                       
                                                                       d2-blur="saveDataValue(de.id, oco.id)">
                                                                </textarea>
                                                            </span>
                                                            <span ng-if="de.valueType === 'NUMBER'">
                                                                <input type="number"   
                                                                       ng-model="dataValues[de.id][oco.id].value"
                                                                       class="form-control" 
                                                                       ng-class="getInputNotifcationClass(de.id, oco.id)"                                                                       
                                                                       d2-blur="saveDataValue(de.id, oco.id, false)">
                                                            </span>
                                                        </div>
                                                        <div ng-if="de.dimensionAsOptionSet">
                                                            <ui-select ng-model="dataValues[de.id]" 
                                                                       on-select="saveDataValue(de.id, $select.selected.id, true)"
                                                                       on-remove="saveDataValue(de.id, $select.selected.id, true)"
                                                                       theme="select2"                                 
                                                                       style="width:100%;">
                                                                <ui-select-match allow-clear="true" class="form-control-ui-select" ng-class="getInputNotifcationClass(de.id, $select.selected.id)" placeholder="{{model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 0 ? 'select_or_search' : 'empty'| translate}}">{{$select.selected.displayName || $select.selected}}</ui-select-match>
                                                                <ui-select-choices repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos | filter: $select.search | limitTo:maxOptionSize">
                                                                    <span ng-bind-html="oco.displayName | highlight: $select.search"></span>
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>
                                                        <div ng-if="de.dimensionAsMultiOptionSet">
                                                            <ui-select multiple
                                                                       ng-model="dataValues[de.id]" 
                                                                       on-select="saveDataValue(de.id, $select.selected.id, true)"
                                                                       on-remove="saveDataValue(de.id, $select.selected.id, true)"
                                                                       theme="bootstrap">
                                                                <ui-select-match allow-clear="true" ng-class="getInputNotifcationClass1(de.id)" placeholder="{{model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 0 ? 'select_or_search' : 'empty'| translate}}">{{$item.displayName}}</ui-select-match>
                                                                <ui-select-choices repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos | filter: $select.search | limitTo:maxOptionSize">
                                                                    <span ng-bind-html="oco.displayName | highlight: $select.search"></span>
                                                                </ui-select-choices>
                                                            </ui-select>
                                                        </div>                                                    
                                                    </td>                                                
                                                </tr>
                                                <tr ng-if="de.showDescription">
                                                    <td colspan="2">
                                                        <div class="alert alert-info" ng-bind-html="de.description">
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr ng-if="de.url">
                                                    <td colspan="2">
                                                        <div class="alert alert-success">
                                                            <a href="{{de.url}}" target="_blank">
                                                                {{de.url}}
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>

                                            <table class="table table-bordered table-condensed" 
                                                   ng-if="de.displayMode !== 'TABULAR' && de.categoryCombo.categories.length === 1 && !de.dimensionAsMultiOptionSet && !de.dimensionAsOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1 ">
                                                <tr ng-repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos" ng-init="mainIndex = $index">
                                                    <td class="mouse-pointer"
                                                        ng-class="getMainQuestionTableStyle(de)" 
                                                        rowspan="{{model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length}}"
                                                        ng-if="$index===0 && !de.description">
                                                        {{de.displayName}}
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                    <td class="mouse-pointer"
                                                        ng-class="getMainQuestionTableStyle(de)" 
                                                        rowspan="{{model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length}}"
                                                        ng-if="$index===0 && de.description"
                                                        ng-click="de.showDescription = !de.showDescription">
                                                        {{de.displayName}}
                                                        <i class="fa fa-info-circle" aria-hidden="true"></i>
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                    <td class="vertical-center" ng-repeat="optionName in oco.displayName.split(',')"                                                  
                                                        rowspan="{{getRowSpan(model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos, optionName)}}"
                                                        ng-if="$index === 0 && (mainIndex % getRowSpan(model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos, optionName) === 0)">
                                                        {{optionName}}
                                                    </td>
                                                    <td class="vertical-center" ng-repeat="optionName in oco.displayName.split(',')" ng-if="$index !== 0">
                                                        {{optionName}}
                                                    </td>
                                                    <td>
                                                        <span ng-if="de.valueType === 'TEXT' || de.valueType === 'LONG_TEXT'">
                                                            <textarea rows="3"  
                                                                   ng-model="dataValues[de.id][oco.id].value"
                                                                   class="form-control" 
                                                                   ng-class="getInputNotifcationClass(de.id, oco.id)"                                                                   
                                                                   d2-blur="saveDataValue(de.id, oco.id)">
                                                            </textarea>
                                                        </span>
                                                        <span ng-if="de.valueType === 'NUMBER'">
                                                            <input type="number"   
                                                                   ng-model="dataValues[de.id][oco.id].value"
                                                                   class="form-control" 
                                                                   ng-class="getInputNotifcationClass(de.id, oco.id)"                                                                   
                                                                   d2-blur="saveDataValue(de.id, oco.id, false)">
                                                        </span>
                                                    </td>
                                                </tr>
                                                <tr ng-if="de.showDescription">
                                                    <td colspan="4">
                                                        <div class="alert alert-info" ng-bind-html="de.description">                                                            
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr ng-if="de.url">
                                                    <td colspan="4">
                                                        <div class="alert alert-success">
                                                            <a href="{{de.url}}" target="_blank">
                                                                {{de.url}}
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </table>                                            

                                            <table class="table table-bordered table-condensed large-table"                                                
                                                   ng-if="de.displayMode !== 'TABULAR' && de.categoryCombo.categories.length === 2 && !de.dimensionAsMultiOptionSet && !de.dimensionAsOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1 ">                                                
                                                <tr>
                                                    <td ng-if="de.description"
                                                        colspan="{{1 + model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions.length}}"
                                                        class="mouse-pointer" 
                                                        ng-class="getMainQuestionTableStyle(de)"
                                                        ng-click="de.showDescription = !de.showDescription">
                                                        {{de.displayName}}
                                                        <i class="fa fa-info-circle" aria-hidden="true"></i>
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                    <td ng-if="!de.description"
                                                        colspan="{{1 + model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions.length}}"
                                                        class="mouse-pointer" 
                                                        ng-class="getMainQuestionTableStyle(de)">
                                                        {{de.displayName}}
                                                        <div ng-if="de.questionWarning" class="alert alert-warning">
                                                            {{de.questionWarning}}
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr ng-if="de.showDescription">
                                                    <td colspan="{{1 + model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions.length}}">
                                                        <div class="alert alert-info" ng-bind-html="de.description">
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr ng-if="de.url">
                                                    <td colspan="{{1 + model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions.length}}">
                                                        <div class="alert alert-success">
                                                            <a href="{{de.url}}" target="_blank">
                                                                {{de.url}}
                                                            </a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <th></th>
                                                    <th class="active pull-center" colspan="{{model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions.length}}">
                                                        {{model.mappedCategoryCombos[de.categoryCombo.id].categories[0].displayName}}
                                                    </th>
                                                </tr>
                                                <tr>    
                                                    <th class="active pull-center">
                                                        {{model.mappedCategoryCombos[de.categoryCombo.id].categories[1].displayName}}
                                                    </th>
                                                    <td class="active pull-center" 
                                                        ng-repeat="option2 in model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions | orderBy: 'name'">
                                                        {{option2.displayName}}
                                                    </td>
                                                </tr>    
                                                <tr ng-repeat="option1 in model.mappedCategoryCombos[de.categoryCombo.id].categories[1].categoryOptions">                                                
                                                    <td class="active">
                                                        <span class="pull-right">{{option1.displayName}}</span>
                                                    </td>                                                
                                                    <td ng-repeat="option2 in model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions | orderBy: 'name'"
                                                        ng-init="oco = getOptionComboByName(option2, option1, model.mappedCategoryCombos[de.categoryCombo.id])">                                                    
                                                        <input type="number"   
                                                                ng-model="dataValues[de.id][oco.id].value"
                                                                class="form-control" 
                                                                ng-class="getInputNotifcationClass(de.id, oco.id)"
                                                                d2-blur="saveDataValue(de.id, oco.id, false)">
                                                    </td>
                                                </tr>
                                            </table>                                        
                                        </div>
                                        
                                        <div ng-if="currentDataElementGroup && currentDataElementGroup.id && (model.selectedDataSet.dataElements | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}).length > 0" 
                                             ng-init="sampleDe = (model.selectedDataSet.dataElements | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'})[0]">                                            
                                            <table class="table table-bordered table-condensed">
                                                <thead ng-if="!isHidden(de, currentDataElementGroup) && $index === 0" ng-repeat="de in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}">
                                                    <tr>
                                                        <th class="active">
                                                            {{'joint_program' | translate}}
                                                        </th>
                                                        <th class="active" ng-repeat="categoryOptionGroup in model.categoryOptionGroups | orderBy: 'order'" >
                                                            {{categoryOptionGroup.name}}
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tr ng-if="!isHidden(de, currentDataElementGroup)" ng-repeat="de in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}">
                                                    <td>
                                                        {{de.displayName}}
                                                    </td>                                                    
                                                    <td ng-repeat="categoryOptionGroup in model.categoryOptionGroups | orderBy: 'order'" 
                                                        ng-init="ocos = (model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos | filter: {categoryOptionGroup: {id: categoryOptionGroup.id}})">
                                                        
                                                        <ui-select multiple
                                                                ng-model="dataValues[de.id][categoryOptionGroup.id]"  
                                                                on-select="saveDataValue(de.id, $select.selected.id, false, categoryOptionGroup.id)"
                                                                on-remove="saveDataValue(de.id, $select.selected.id, false, categoryOptionGroup.id)"
                                                                theme="bootstrap">
                                                            <ui-select-match allow-clear="true" ng-class="getInputNotifcationClass1(de.id)" placeholder="{{ocos.length > 0 ? 'select_or_search' : 'empty'| translate}}">{{$item.displayName}}</ui-select-match>
                                                            <ui-select-choices repeat="oco in ocos | filter: $select.search | limitTo:maxOptionSize">
                                                                <span ng-bind-html="oco.displayName | highlight: $select.search"></span>
                                                            </ui-select-choices>
                                                        </ui-select>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>                        
                            </div>
                        </tab>                    
                    </tabset>
                    
                </div>
            </div>
            
        </div>
        
        <div ng-if="model.showReportDiv">            
            <div class="remove-left-padding" id="exportTable">
                <div class="col-sm-12 hideInPrint">                    
                    <button type="button" 
                            class="btn btn-success"
                            title="{{'export_excel' | translate}}"
                            ng-click="exportData()">
                        <i class="fa fa-file-excel-o fa-2x" aria-hidden="true"></i>
                    </button>
                    <button type="button" 
                            class="btn btn-primary horizontal-spacing" 
                            title="{{'export_pdf' | translate}}"
                            onclick="javascript:window.print()">
                        <i class="fa fa-file-pdf-o fa-2x" aria-hidden="true"></i>
                    </button>
                </div>
                <div class="col-sm-12 small-vertical-spacing" ng-repeat="dataElementGroupSet in model.dataElementGroupSets">
                    <div class="alert alert-info">
                        <h1>{{dataElementGroupSet.name}}</h1>
                    </div>
                    <div class="row vertical-spacing">
                        <div class="col-sm-12" ng-repeat="dataElementGroup in dataElementGroupSet.dataElementGroups">
                            <div class="alert alert-warning remove-default-padding">
                                <h3>{{dataElementGroup.name}}</h3>
                            </div>

                            <div ng-repeat="de in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: dataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}}" ng-init="mainIndex = $index">

                                <table border="1" class="table table-condensed report-table" 
                                       ng-if="de.dimensionAsMultiOptionSet || de.dimensionAsOptionSet || model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length === 1">                                                
                                    <tr ng-if="!de.dimensionAsOptionSet && !de.dimensionAsMultiOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1">
                                        <th>                                                
                                        </th>
                                        <th ng-repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos">
                                            {{oco.displayName}}
                                        </th>
                                    </tr>                                            
                                    <tr>                                          
                                        <td class="col-sm-1">
                                            {{de.displayName}}
                                        </td>
                                        <td class="col-sm-1">
                                            <div ng-if="!de.dimensionAsOptionSet && !de.dimensionAsMultiOptionSet" ng-init="oco = model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos[0]">                                                        
                                                {{dataValues[de.id][oco.id].value}}
                                            </div>
                                            <div ng-if="de.dimensionAsOptionSet">
                                                {{dataValues[de.id].displayName}}
                                            </div>
                                            <div ng-if="de.dimensionAsMultiOptionSet">
                                                {{joinOnProperty(dataValues[de.id], 'displayName')}}
                                            </div>                                                    
                                        </td>                                                
                                    </tr>
                                </table>

                                <table border="1" class="table table-condensed report-table" 
                                       ng-if="de.displayMode !== 'TABULAR' && de.categoryCombo.categories.length === 1 && !de.dimensionAsMultiOptionSet && !de.dimensionAsOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1 ">                                                
                                    <tr ng-repeat="oco in model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos" ng-init="mainIndex = $index">
                                        <td rowspan="{{model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length}}"
                                            class="col-sm-1"
                                            ng-if="$index===0">
                                            {{de.displayName}}
                                        </td>
                                        <td class="vertical-center col-sm-1" ng-repeat="optionName in oco.displayName.split(',')"                                                  
                                            rowspan="{{getRowSpan(model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos, optionName)}}"
                                            ng-if="$index === 0 && (mainIndex % getRowSpan(model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos, optionName) === 0)">
                                            {{optionName}}
                                        </td>
                                        <td class="vertical-center col-sm-1" ng-repeat="optionName in oco.displayName.split(',')" ng-if="$index !== 0">
                                            {{optionName}}
                                        </td>
                                        <td class="col-sm-1">
                                            {{dataValues[de.id][oco.id].value}}
                                        </td>
                                    </tr>                                            
                                </table>

                                <table border="1" class="table-condensed report-table"                                                
                                       ng-if="de.displayMode !== 'TABULAR' && de.categoryCombo.categories.length === 2 && !de.dimensionAsMultiOptionSet && !de.dimensionAsOptionSet && model.mappedCategoryCombos[de.categoryCombo.id].categoryOptionCombos.length > 1 ">                                                
                                    <thead>
                                        <tr>
                                            <th colspan="2" class="col-sm-1"></th>                                        
                                            <th class="active pull-center col-sm-1" 
                                                ng-repeat="option2 in model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions | orderBy: 'displayName'">
                                                {{option2.displayName}}
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="option1 in model.mappedCategoryCombos[de.categoryCombo.id].categories[1].categoryOptions">                                                
                                            <td rowspan="{{model.mappedCategoryCombos[de.categoryCombo.id].categories[1].categoryOptions.length}}" 
                                                class="col-sm-1"
                                                ng-if="$index === 0">
                                                {{de.displayName}}
                                            </td>
                                            <th class="active col-sm-1">
                                                {{option1.displayName}}
                                            </th>                                                
                                            <td ng-repeat="option2 in model.mappedCategoryCombos[de.categoryCombo.id].categories[0].categoryOptions | orderBy: 'displayName'"
                                                class="col-sm-1"
                                                ng-init="oco = getOptionComboByName(option2, option1, model.mappedCategoryCombos[de.categoryCombo.id])">
                                                {{dataValues[de.id][oco.id].value}}
                                            </td>
                                        </tr>
                                    </tbody>                                    
                                </table>
                                <div ng-if="mainIndex === 1 && de.displayMode === 'TABULAR' && (model.selectedDataSet.dataElements | filter: {dataElementGroup: {id: dataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}).length > 0" 
                                     ng-init="sampleDe = (model.selectedDataSet.dataElements | filter: {dataElementGroup: {id: dataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'})[0]">                                            
                                   <table class="table table-bordered table-condensed">
                                        <thead ng-if="$index === 0" ng-repeat="tde in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: currentDataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}">
                                            <tr>
                                                <th class="active">
                                                    {{'joint_program' | translate}}
                                                </th>
                                                <th class="active" ng-repeat="categoryOptionGroup in model.categoryOptionGroups | orderBy: 'order'" >
                                                    {{categoryOptionGroup.name}}
                                                </th>
                                            </tr>
                                        </thead>
                                        <tr ng-repeat="tde in model.selectedDataSet.dataElements | orderBy: 'order' | filter: {dataElementGroup: {id: dataElementGroup.id}, dataElementGroupSet: {id: dataElementGroupSet.id}, displayMode: 'TABULAR'}">
                                            <td>
                                               {{tde.displayName}}
                                            </td>                                                    
                                            <td ng-repeat="categoryOptionGroup in model.categoryOptionGroups | orderBy: 'order'" 
                                               ng-init="ocos = (model.mappedCategoryCombos[tde.categoryCombo.id].categoryOptionCombos | filter: {categoryOptionGroup: {id: categoryOptionGroup.id}})">                                                
                                                {{joinOnProperty(dataValues[tde.id][categoryOptionGroup.id], 'displayName')}}
                                           </td>
                                        </tr>
                                    </table>
                                </div>
                                
                            </div>
                        </div>                        
                    </div>                    
                </div>
            </div>
        </div>
        
    </form>

</div>
